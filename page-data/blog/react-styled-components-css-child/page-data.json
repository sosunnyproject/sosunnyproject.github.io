{"componentChunkName":"component---src-templates-blog-post-js","path":"/blog/react-styled-components-css-child/","result":{"data":{"site":{"siteMetadata":{"title":"sosunnyproject | Personal Website · Portfolio · Dev Blog · Contact","author":"So Sun Park | sosunnyproject"}},"markdownRemark":{"html":"<h2>Problem</h2>\n<p>When your last-child, first-child css condition doesn't work, we need to check html tags inside React code!</p>\n<p>For example, my original code (like below) was causing such problem.</p>\n<p>특정 컴포넌트 리스트의 first-child, last-child 특정 css 조건이 먹히지 않는다면, 리액트 코드의 html tag 들을 검토해보는 게 좋다. 아래는 예시코드이다.</p>\n<h3>Code Example</h3>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> styled <span class=\"token keyword\">from</span> <span class=\"token string\">'styled-components'</span>\n<span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span>\n\n<span class=\"token keyword\">const</span> Name <span class=\"token operator\">=</span> styled<span class=\"token punctuation\">.</span>div<span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n  margin-bottom: 10px;\n\n  &amp;: last-child {\n    margin-bottom: 0;\n  }\n</span><span class=\"token template-punctuation string\">`</span></span>\n\n<span class=\"token operator\">&lt;</span>ExampleTable<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span><span class=\"token operator\">></span>\n  <span class=\"token punctuation\">{</span><span class=\"token comment\">/* item: { data: ['annie', 'bianca', 'cecilia'] }   */</span><span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">{</span>item<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>length <span class=\"token operator\">&amp;&amp;</span> item<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">value<span class=\"token punctuation\">,</span> index</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">></span>\n          <span class=\"token operator\">&lt;</span>Name<span class=\"token operator\">></span>\n            <span class=\"token punctuation\">{</span>value<span class=\"token punctuation\">}</span>\n          <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Name<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token operator\">></span>\n      <span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>ExampleTable<span class=\"token operator\">></span></code></pre></div>\n<h3>Analysis</h3>\n<ul>\n<li>I wanted all <code class=\"language-text\">&lt;Name&gt;</code> components to have <code class=\"language-text\">bottom margin 10px</code>, but wanted to give <code class=\"language-text\">0 bottom margin</code> to <code class=\"language-text\">&lt;Name&gt;</code> tag's last-child.</li>\n<li>But my current code (above) does not have wrapper tag for several <code class=\"language-text\">&lt;Name&gt;</code> components. Fyi, <code class=\"language-text\">&lt;&gt; &lt;/&gt;</code> doesn't really do anything.</li>\n<li>This means your html and css cannot recognize which one is the first-child or last-child of <code class=\"language-text\">&lt;Name&gt;</code> component list. </li>\n</ul>\n<p>[번역]</p>\n<ul>\n<li><code class=\"language-text\">&lt;Name&gt;</code> 컴포넌트 리스트의 마지막 컴포넌트에만 마진을 다르게 주고 싶었으나, 위의 코드를 보면 해당 컴포넌트들을 하나로 묶어주는 html tag 가 없다. <code class=\"language-text\">&lt;&gt; &lt;/&gt;</code> 이렇게 빈 태그는 wrapper 역할을 해주지 못한다.</li>\n<li>이런 상황이면 해당 컴포넌트 리스트가 단독적으로 구별되지 않아서, 어떤 것이 첫번째이고 마지막인지 html css가 알지 못한다.</li>\n</ul>\n<h2>Solution 1: make last-child, first-child css conditions work | css 조건 살리기</h2>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token operator\">&lt;</span>ExampleTable<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span> <span class=\"token punctuation\">{</span><span class=\"token comment\">/* change this!! */</span><span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">{</span>item<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>length <span class=\"token operator\">&amp;&amp;</span> item<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">value<span class=\"token punctuation\">,</span> index</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">></span> <span class=\"token punctuation\">{</span><span class=\"token comment\">/* do not make this as a div */</span><span class=\"token punctuation\">}</span>\n          <span class=\"token operator\">&lt;</span>Name<span class=\"token operator\">></span>\n            <span class=\"token punctuation\">{</span>value<span class=\"token punctuation\">}</span>\n          <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Name<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token operator\">></span>\n      <span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>ExampleTable<span class=\"token operator\">></span></code></pre></div>\n<ul>\n<li>Make a wrapper div for list of <code class=\"language-text\">&lt;Name&gt;</code> components.</li>\n<li>Do not make <code class=\"language-text\">&lt;&gt; &lt;/&gt;</code> as a <code class=\"language-text\">div</code> tag inside <code class=\"language-text\">return</code>. This will make html like this.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span>Name <span class=\"token operator\">/</span><span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span>Name <span class=\"token operator\">/</span><span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span></code></pre></div>\n<ul>\n<li>This causes problem because each <code class=\"language-text\">&lt;Name&gt;</code> component becomes <strong>both first-child &#x26; last-child</strong> inside the <code class=\"language-text\">div</code>. This is not what you want.</li>\n<li>만약 <code class=\"language-text\">return</code> 안의 빈 태그를 <code class=\"language-text\">div</code>로 바꿔버리면, 위의 예시처럼 각 <code class=\"language-text\">&lt;Name&gt;</code> 컴포넌트가 하나의 리스트 안에 있지 않게 된다. 그러면 first-child, last-child 구분을 할 수가 없다. 모든 아이들이 first 이자 last 가 되는 것이다. </li>\n</ul>\n<h2>Solution 2: add key index | 컴포넌트에 키 값, 인덱스 값 추가하기</h2>\n<p>On top of solution 1, you can add one more thing.</p>\n<p>In the example code, it creates the list of components because we are using array of data. To make your code clean, you might want to create <code class=\"language-text\">key</code> or <code class=\"language-text\">index</code> for iterating items inside <code class=\"language-text\">return</code> code. </p>\n<p>Because you will see annoying warnings like this in a console.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 482px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/4789611df436658e265872e9a7b8c6b3/37e0d/consoleWarning.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 15.104166666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA1ElEQVQI1xWOzU7CUBBGb8RY+3dvL1QXUIukLopFjEYUQguFuhCNJhD0NXwGd2585uOwOPkymW8yR330U2a+x2uvy/ospo7bQofmPKayEYu25SkyTC8Syixjlec0VxlNNmBzPWSZJrwMcxZJl8Jo1FzK90qxNiGV5zJ3HclTVjKXgU8V+uwil7egxTY8ZmscHj2HB9lN5dlEeoe8k7uRDlClmNTC5+2Y3ajga3zDXngXo40YP1vDTy/gN9X89TXf9ojJSYuDSC12SzFrBpfMOpZCh/wDExdVijW9vngAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"react js console warning\"\n        title=\"react js console warning\"\n        src=\"/static/4789611df436658e265872e9a7b8c6b3/37e0d/consoleWarning.png\"\n        srcset=\"/static/4789611df436658e265872e9a7b8c6b3/8514f/consoleWarning.png 192w,\n/static/4789611df436658e265872e9a7b8c6b3/804b2/consoleWarning.png 384w,\n/static/4789611df436658e265872e9a7b8c6b3/37e0d/consoleWarning.png 482w\"\n        sizes=\"(max-width: 482px) 100vw, 482px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>But you don't want to make outer tag of <code class=\"language-text\">&lt;Name&gt;</code> component as <code class=\"language-text\">div</code> tag. We already talked above that it will mess up your css. </p>\n<p>As alternatives, we have two possible solutions.</p>\n<ol>\n<li>We can just delete empty tag <code class=\"language-text\">&lt;&gt; &lt;/&gt;</code>. </li>\n</ol>\n<p>Just delete empty tag, and give <code class=\"language-text\">key</code> to <code class=\"language-text\">&lt;Name&gt;</code> component.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// ...</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span>Name key<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>index<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n      <span class=\"token punctuation\">{</span>value<span class=\"token punctuation\">}</span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Name<span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// ...</span></code></pre></div>\n<ol start=\"2\">\n<li>For some reason, if you need to keep it, we can use <strong>React.Fragment</strong>.  </li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">A common pattern in React is for a component to return multiple elements. \nFragments let you group a list of children without adding extra nodes to the DOM.\n\n- quote from official REACT Docs.</code></pre></div>\n<p>Here is example code of React.Fragment.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// ...</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span>React<span class=\"token punctuation\">.</span>Fragment key<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>index<span class=\"token punctuation\">}</span><span class=\"token operator\">></span> <span class=\"token punctuation\">{</span><span class=\"token comment\">/* change this!! */</span><span class=\"token punctuation\">}</span>\n      <span class=\"token operator\">&lt;</span>Name<span class=\"token operator\">></span>\n        <span class=\"token punctuation\">{</span>value<span class=\"token punctuation\">}</span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Name<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>React<span class=\"token punctuation\">.</span>Fragment<span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// ...</span></code></pre></div>\n<p>This way, you wouldn't mess up first-child or last-child css conditions AND have a key for each child component.</p>\n<p>리스트 데이터이기에 어레이를 돌게 되면 각 내부 컴포넌트에 key, index 값을 주라는 콘솔 워닝이 뜰 것이다. 이 워닝을 없애려면 1번처럼 빈 태그 <code class=\"language-text\">&lt;&gt;&lt;/&gt;</code>를 아예 삭제하고 <code class=\"language-text\">&lt;Name&gt;</code> 컴포넌트에 키 값을 줄 수 있다. </p>\n<p>혹시 어떤 다른 조건때문에 <code class=\"language-text\">&lt;Name&gt;</code>을 감싸는 태그가 필요하다면, 2번처럼 React.Fragment 로 만들면 된다. 위에서 설명했듯이, 여기에 <code class=\"language-text\">div</code> 태그를 써서 추가적인 노드를 생성하는 방법은 피해야 한다.</p>\n<h2>Conclusion</h2>\n<p>Let's not forget to wrap same components inside a single <code class=\"language-text\">div</code> tag to distinguish first-child and last-child of css. Hope this helped you solve a problem.</p>\n<p>같은 컴포넌트 애들끼리 한 div 안에 잘 묶여있는지 확인하는 것 잊지 않기!</p>\n<p>￼</p>\n<h3>Reference</h3>\n<ul>\n<li><a href=\"https://developer.mozilla.org/ko/docs/Web/CSS/Descendant_combinator\">https://developer.mozilla.org/ko/docs/Web/CSS/Descendant_combinator</a></li>\n<li><a href=\"https://www.geeksforgeeks.org/css-child-vs-descendant-selectors/\">https://www.geeksforgeeks.org/css-child-vs-descendant-selectors/</a></li>\n<li><a href=\"https://reactjs.org/docs/fragments.html\">https://reactjs.org/docs/fragments.html</a></li>\n</ul>","excerpt":"Problem When your last-child, first-child css condition doesn't work, we need to check html tags inside React code! For example, my original…","fields":{"slug":"/blog/react-styled-components-css-child/"},"frontmatter":{"title":"[React] CSS Styled Components: fixing first-child last-child problem","category":"blog","date":"December 13, 2020"}}},"pageContext":{"slug":"/blog/react-styled-components-css-child/"}},"staticQueryHashes":["2052298874"]}